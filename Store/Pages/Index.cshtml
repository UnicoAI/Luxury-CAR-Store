@page
@model Store.Pages.IndexModel
@{
    ViewData["Title"] = "Luxurious Cars";
}


    <div class="p-1 text-bg-light bg-transparent rounded rounded-pill shadow-sm col-md-3" style="position:fixed;left:2%;top:20%;z-index:10000;">
        <div class="input-group">
            <div class="input-group-prepend">

                <button id="selectCategoryButton" type="button" class="btn btn-link text-warning"><i class="fa fa-search"></i></button>
            </div>
            <select type="search" class="form-control border-0 bg-transparent text-bg-light"  id="category">
            <option value="" class="form-control border-0 bg-transparent">
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="white" class="bi bi-car-front" viewBox="0 0 16 16">
                    <path d="M4 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0m10 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM4.862 4.276 3.906 6.19a.51.51 0 0 0 .497.731c.91-.073 2.35-.17 3.597-.17 1.247 0 2.688.097 3.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 10.691 4H5.309a.5.5 0 0 0-.447.276" />
                    <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679c.033.161.049.325.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.807.807 0 0 0 .381-.404l.792-1.848ZM4.82 3a1.5 1.5 0 0 0-1.379.91l-.792 1.847a1.8 1.8 0 0 1-.853.904.807.807 0 0 0-.43.564L1.03 8.904a1.5 1.5 0 0 0-.03.294v.413c0 .796.62 1.448 1.408 1.484 1.555.07 3.786.155 5.592.155 1.806 0 4.037-.084 5.592-.155A1.479 1.479 0 0 0 15 9.611v-.413c0-.099-.01-.197-.03-.294l-.335-1.68a.807.807 0 0 0-.43-.563 1.807 1.807 0 0 1-.853-.904l-.792-1.848A1.5 1.5 0 0 0 11.18 3z" />
                </svg>
            </option>
                @foreach (var category in Model.Categories)
                {
                    <option value="@category.CategoryId">
                        @category.Title
                    </option>
                }
            </select>
        </div>
    </div>
   

<div class="carousel carousel-fade slide" data-bs-ride="carousel" id="slideshow">
    <div class="carousel-indicators">
        <button aria-current="true" aria-label="Slide 1" class="active" data-bs-slide-to="0" data-bs-target="#slideshow" type="button"></button>
        <button aria-label="Slide 2" data-bs-slide-to="1" data-bs-target="#slideshow" type="button"></button>
        <button aria-label="Slide 3" data-bs-slide-to="2" data-bs-target="#slideshow" type="button"></button>
        <button aria-label="Slide 4" data-bs-slide-to="3" data-bs-target="#slideshow" type="button"></button>
        <button aria-label="Slide 5" data-bs-slide-to="4" data-bs-target="#slideshow" type="button"></button>
    </div>
    <div class="carousel-inner">
        <div class="active carousel-item" data-bs-interval="5000">
            <img alt="slide-1" class="d-block w-100" src="/img/slideshow/bmw.png">
            <div class="carousel-caption d-md-block d-none" dir="ltr">
                <h5>Save Money With Us</h5>
                <p>Unbeatable Prices</p>
            </div>
        </div>
        <div class="carousel-item" data-bs-interval="5000">
            <img alt="slide-2" class="d-block w-100" src="/img/slideshow/jaguar.png">
            <div class="carousel-caption d-md-block d-none" dir="ltr">
                <h5>New Jaguar</h5>
                <p>Your wish, our job to accomplish it</p>
            </div>
        </div>
        <div class="carousel-item" data-bs-interval="5000">
            <img alt="slide-3" class="d-block w-100" src="/img/slideshow/mercedes.png">
            <div class="carousel-caption d-md-block d-none" dir="ltr">
                 <h5>Buy Now Pay Later</h5>
                <p>Interest Free</p>
            </div>
        </div>
        <div class="carousel-item" data-bs-interval="5000">
            <img alt="slide-4" class="d-block w-100" src="/img/slideshow/porsche.png">
            <div class="carousel-caption d-md-block d-none" dir="ltr">
                <h5>Save Money With Us</h5>
                <p>Unbeatable Prices</p>
            </div>
        </div>
        <div class="carousel-item" data-bs-interval="5000">
            <img alt="slide-5" class="d-block w-100" src="/img/slideshow/landrover.png">
            <div class="carousel-caption d-md-block d-none" dir="ltr">
               <h5>Bespoke Orders</h5>
                <p>Fast Deliveries</p>
            </div>
        </div>

    </div>
    <button class="carousel-control-prev" data-bs-slide="prev" data-bs-target="#slideshow" type="button">
        <span aria-hidden="true" class="carousel-control-prev-icon"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" data-bs-slide="next" data-bs-target="#slideshow" type="button">
        <span aria-hidden="true" class="carousel-control-next-icon"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>



@section scripts {
    <script>
        $(document).ready(function () {
            $("#selectCategoryButton").click(function () {
                var selectedCategoryId = $("#category").val();
                if (selectedCategoryId) {
                    window.location.href = "/Category/Index/" + selectedCategoryId;
                }
            });
        });
    </script>
}

@foreach (var category in Model.Categories) {
    <div class="card m-auto my-5" style="max-width: 1200px;background: rgba(42, 44, 57, 0.9);color:white">
        <div class="bg-transparent card-header px-0 py-0"  style="font-size: 1.3rem;
                     background: rgba(255, 255, 255, 0.2);
                     border-radius: 16px;
                     box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
                     backdrop-filter: blur(5px);
                     -webkit-backdrop-filter: blur(5px);
                     border: 1px solid rgba(255, 255, 255, 0.3);
                     color:white !important;">
            <div class="category-title py-3 text-center text-white" dir="ltr" style="background:#ef6603">
                <a asp-page="/Category/Index" style="background:transparent;color:white" asp-route-id="@category.CategoryId" dir="ltr">@category.Title</a>
               
            </div>
        </div>
        <div class="card-body d-flex flex-wrap gap-5 justify-content-center py-4" >
            @foreach (var product in category.Products) {
                <div class="card card-product pb-3" style="width: 230px;
                     background: rgba(255, 255, 255, 0.2);
                     border-radius: 16px;
                     box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
                     backdrop-filter: blur(5px);
                     -webkit-backdrop-filter: blur(5px);
                     border: 1px solid rgba(255, 255, 255, 0.3);
                     color:white !important;">
                    <a asp-page="/Product/Index" asp-route-id="@product.ProductId">
                        <img alt="@product.Name" class="card-img-top"  src="@product.ImageUrl" style="max-height: 200px;" width="100%">
                        <div class="card-body text-center text-secondary">
                            <h5 class="card-title" style="font-size: 1.1rem;color:#ef6603" dir="ltr">@product.Name</h5>
                            <p class="card-text" style="font-size: 1rem; height: 72px;color:white" dir="ltr">@product.Description</p>
                            <div class="align-items-center d-flex flex-column gap-1 justify-content-center mt-3" style="height: 50px">
                                <span style="color: #ef6603;font-size: 1.82rem" dir="ltr"> £ @product.Price </span>
                                @if (product.StockQuantity < 10) {
                                    <span class="small text-danger" style="font-size: 0.82rem" dir="ltr">Only @product.StockQuantity left on stock! </span>
                                }
                            </div>

                        </div>
                    </a>
                </div>
            }
        </div>
      
    </div>
}